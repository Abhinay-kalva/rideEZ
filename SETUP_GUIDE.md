# üöÄ RideEZ - Step-by-Step Setup Guide

Follow these steps carefully to set up and run the RideEZ application.

---

## üìã Prerequisites Checklist

Before starting, ensure you have:

- [ ] **Java JDK 17 or higher** installed
  - Check: `java -version`
  - Download: https://adoptium.net/
  
- [ ] **Maven 3.6+** installed
  - Check: `mvn -version`
  - Download: https://maven.apache.org/download.cgi

- [ ] **MySQL 8.0+** installed and running
  - Check: `mysql --version`
  - Download: https://dev.mysql.com/downloads/mysql/

- [ ] **Google Maps API Key** (Free tier available)
  - Get it: https://console.cloud.google.com/google/maps-apis

- [ ] **Firebase Account** (Free tier available)
  - Sign up: https://firebase.google.com/

---

## Step 1: Database Setup (MySQL)

### 1.1 Start MySQL Server

Make sure MySQL service is running on your system.

**Windows:**
```bash
# Check if MySQL is running in Services, or start it:
net start MySQL80
```

**Linux/Mac:**
```bash
sudo service mysql start
# or
sudo systemctl start mysql
```

### 1.2 Create Database

Open MySQL command line or any MySQL client:

```bash
mysql -u root -p
```

Then run:
```sql
CREATE DATABASE rideez_db;
SHOW DATABASES;  -- Verify it was created
EXIT;
```

### 1.3 Configure Database Credentials

Edit the file: `backend/src/main/resources/application.properties`

Update these lines with YOUR MySQL credentials:
```properties
spring.datasource.username=root          # Change if different
spring.datasource.password=root          # Change to your MySQL password
```

**Note:** The database schema will be auto-generated by Hibernate on first run, so you don't need to run SQL scripts manually.

---

## Step 2: Backend Setup (Spring Boot)

### 2.1 Navigate to Backend Directory

```bash
cd backend
```

### 2.2 Verify Java and Maven

```bash
java -version
mvn -version
```

### 2.3 Build the Project

This downloads all dependencies and compiles the code:

```bash
mvn clean install
```

**Expected output:** `BUILD SUCCESS`

**Note:** First build may take 3-5 minutes to download dependencies.

### 2.4 Run the Backend

```bash
mvn spring-boot:run
```

**Expected output:**
```
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v3.2.0)

...
Started RideEzApplication in X.XXX seconds
```

**‚úÖ Backend is running on:** `http://localhost:8080`

**Keep this terminal window open!** The backend must stay running.

---

## Step 3: Firebase Setup

### 3.1 Create Firebase Project

1. Go to: https://console.firebase.google.com/
2. Click **"Add project"** or **"Create a project"**
3. Enter project name: `rideez-app` (or any name)
4. Disable Google Analytics (optional for development)
5. Click **"Create project"**

### 3.2 Enable Realtime Database

1. In Firebase Console, click **"Build"** ‚Üí **"Realtime Database"**
2. Click **"Create Database"**
3. Choose location (select closest to you)
4. Choose **"Start in test mode"** (for development)
5. Click **"Enable"**

### 3.3 Get Firebase Configuration

1. In Firebase Console, click the **‚öôÔ∏è (gear icon)** ‚Üí **"Project settings"**
2. Scroll down to **"Your apps"** section
3. Click **"Web"** icon (`</>`)
4. Register app name: `RideEZ Web`
5. Copy the `firebaseConfig` object

It looks like this:
```javascript
const firebaseConfig = {
  apiKey: "AIzaSy...",
  authDomain: "rideez-app.firebaseapp.com",
  databaseURL: "https://rideez-app-default-rtdb.firebaseio.com/",
  projectId: "rideez-app",
  storageBucket: "rideez-app.appspot.com",
  messagingSenderId: "123456789",
  appId: "1:123456789:web:abc123"
};
```

### 3.4 Update Firebase Config in Frontend

Edit the file: `frontend/js/config.js`

Replace the `FIREBASE_CONFIG` object with your actual config:

```javascript
const CONFIG = {
    API_BASE_URL: 'http://localhost:8080',
    FIREBASE_CONFIG: {
        apiKey: "AIzaSy...",              // Your actual API key
        authDomain: "rideez-app.firebaseapp.com",
        databaseURL: "https://rideez-app-default-rtdb.firebaseio.com/",
        projectId: "rideez-app",
        storageBucket: "rideez-app.appspot.com",
        messagingSenderId: "123456789",
        appId: "1:123456789:web:abc123"
    },
    GOOGLE_MAPS_API_KEY: "YOUR_GOOGLE_MAPS_API_KEY"  // We'll update this next
};
```

### 3.5 Set Database Rules (Optional but Recommended)

1. In Firebase Console, go to **Realtime Database**
2. Click **"Rules"** tab
3. Replace with:
```json
{
  "rules": {
    "rides": {
      ".read": true,
      ".write": true
    }
  }
}
```
4. Click **"Publish"**

---

## Step 4: Google Maps Setup

### 4.1 Create Google Cloud Project (if needed)

1. Go to: https://console.cloud.google.com/
2. Create a new project or select existing one
3. Name it: `RideEZ Maps`

### 4.2 Enable Required APIs

1. Go to **"APIs & Services"** ‚Üí **"Library"**
2. Search and enable these APIs (one by one):
   - ‚úÖ **Maps JavaScript API**
   - ‚úÖ **Places API**
   - ‚úÖ **Directions API**
   - ‚úÖ **Geocoding API**

### 4.3 Create API Key

1. Go to **"APIs & Services"** ‚Üí **"Credentials"**
2. Click **"+ CREATE CREDENTIALS"** ‚Üí **"API key"**
3. Copy the API key (looks like: `AIzaSy...`)
4. (Optional) Click "Restrict key" to add restrictions for security

### 4.4 Update Google Maps API Key

**File 1:** Edit `frontend/index.html`

Find this line (around line 207):
```html
<script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places,directions&callback=initMaps"></script>
```

Replace `YOUR_GOOGLE_MAPS_API_KEY` with your actual key:
```html
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSy...&libraries=places,directions&callback=initMaps"></script>
```

**File 2:** Edit `frontend/js/config.js`

Update the `GOOGLE_MAPS_API_KEY`:
```javascript
GOOGLE_MAPS_API_KEY: "AIzaSy..."  // Your actual API key
```

---

## Step 5: Frontend Setup

### 5.1 Navigate to Frontend Directory

Open a **NEW terminal window** (keep backend running in the other one):

```bash
cd frontend
```

### 5.2 Serve the Frontend

**Choose ONE of these options:**

#### Option A: Python HTTP Server (Recommended - Simplest)

```bash
# Python 3
python -m http.server 8000

# Or Python 2
python -m SimpleHTTPServer 8000
```

#### Option B: Node.js HTTP Server

```bash
npx http-server -p 8000
```

#### Option C: VS Code Live Server

1. Install "Live Server" extension in VS Code
2. Right-click on `frontend/index.html`
3. Select **"Open with Live Server"**

#### Option D: Any Web Server

- Copy `frontend` folder contents to your web server's document root
- Access via browser

### 5.3 Access the Application

Open your browser and go to:

```
http://localhost:8000
```

**‚úÖ Frontend is running!**

---

## Step 6: Test the Application

### 6.1 Register a Rider Account

1. On the login page, click **"Register"**
2. Fill in the form:
   - Name: `Test Rider`
   - Phone: `1234567890`
   - Email: `rider@test.com` (optional)
   - Password: `password123`
   - Role: **Rider (Offer Rides)**
3. Click **"Register"**
4. You should be logged in and see the Rider Dashboard

### 6.2 Create a Ride (as Rider)

1. Click **"Create Ride"** button
2. On the map, click to select **Source** location
3. Click to select **Destination** location
4. Select Date & Time (future date/time)
5. Enter Price: `100`
6. Click **"Create Ride"**
7. You should see your ride in the list

### 6.3 Test as Passenger

1. **Logout** (click Logout button)
2. **Register** a new account:
   - Name: `Test Passenger`
   - Phone: `0987654321`
   - Password: `password123`
   - Role: **Passenger (Find Rides)**
3. You'll see the Passenger Dashboard
4. Select a date and click **"Search"**
5. You should see available rides
6. Click **"Book Ride"** on any ride

### 6.4 Start/End Ride (as Rider)

1. **Logout** and **Login** as Rider again
2. Find your ride in the list
3. Click **"Start Ride"** (if ride is booked)
4. Location tracking starts automatically
5. Click **"End Ride"** when done

---

## üêõ Troubleshooting

### Backend won't start

**Error: "Port 8080 already in use"**
```bash
# Windows: Find process using port 8080
netstat -ano | findstr :8080
taskkill /PID <PID> /F

# Linux/Mac: Find and kill process
lsof -ti:8080 | xargs kill
```

**Error: "Access denied for user"**
- Check MySQL username/password in `application.properties`
- Verify MySQL is running
- Test connection: `mysql -u root -p`

**Error: "Cannot connect to database"**
- Verify MySQL service is running
- Check database exists: `SHOW DATABASES;`
- Verify connection URL in `application.properties`

### Frontend issues

**Maps not loading**
- Verify Google Maps API key is correct
- Check browser console for errors (F12)
- Ensure APIs are enabled in Google Cloud Console
- Check API key restrictions

**Firebase errors**
- Verify Firebase config in `config.js`
- Check Realtime Database is enabled
- Verify database rules allow read/write
- Check browser console for specific errors

**CORS errors**
- Ensure backend is running on port 8080
- Check `SecurityConfig.java` has correct CORS settings
- Verify frontend is accessing backend at `http://localhost:8080`

**"Failed to fetch" errors**
- Ensure backend is running
- Check backend URL in `frontend/js/config.js`
- Verify no firewall blocking port 8080

### Database issues

**Tables not created**
- Check `spring.jpa.hibernate.ddl-auto=update` in `application.properties`
- Look for errors in backend console
- Manually run schema: `mysql -u root -p rideez_db < backend/src/main/resources/schema.sql`

---

## ‚úÖ Verification Checklist

Before considering setup complete:

- [ ] MySQL database `rideez_db` exists
- [ ] Backend runs without errors on `http://localhost:8080`
- [ ] Frontend loads on `http://localhost:8000`
- [ ] Can register a new user
- [ ] Can login with registered user
- [ ] Google Maps loads and shows map
- [ ] Can create a ride (as Rider)
- [ ] Can search for rides (as Passenger)
- [ ] Firebase connection works (check browser console)

---

## üéâ You're All Set!

Your RideEZ application should now be running successfully!

**Backend:** `http://localhost:8080`
**Frontend:** `http://localhost:8000`

**Remember:**
- Keep backend terminal running while using the app
- Keep frontend server running (or use Live Server)
- For production, configure proper security settings
- Change JWT secret key in production
- Use HTTPS in production

---

## üìû Need Help?

- Check browser console (F12) for errors
- Check backend console for server errors
- Review the main README.md for more details
- Verify all configuration files are updated correctly

Happy coding! üöÄ



